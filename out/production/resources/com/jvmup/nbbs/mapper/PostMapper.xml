<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jvmup.nbbs.dao.PostDao">
    <resultMap id="postResult" type="post" autoMapping="true">
        <association property="user" resultMap="userResult"/>
        <collection property="commentList" javaType="comment">
            <id column="comment_id" property="id"/>
            <result column="comment_time" property="time"/>
            <result column="comment_content" property="content"/>
            <association property="user" resultMap="userResult" columnPrefix="comment_user"/>
            <association property="comment" javaType="comment">
                <result column="comment_comment_content" property="content"/>
                <association property="user" javaType="user">
                    <result property="nickname" column="comment_comment_user_nickname"/>
                </association>
            </association>

        </collection>
    </resultMap>
    <resultMap id="userResult" type="user">
        <result property="nickname" column="nickname"/>
        <result property="ex" column="ex"/>
        <result property="createTime" column="create_time"/>
        <result property="avatar" column="avatar"/>
    </resultMap>
    <select id="getPost">
        select p.id,p.create_time,p.content,p.title,p.view,p.last_modify,p. from post p left join user post_user on p.user_id=post_user.id
    </select>
</mapper>
